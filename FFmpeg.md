요청하신 FFmpeg 가이드의 1번(라이브러리)부터 5번(H.264 인코딩)까지 모든 내용을 통합하여 하나의 마크다운 코드로 정리해 드립니다. 깃허브 README.md나 기술 블로그에 그대로 복사해서 사용하세요.Markdown# 🎥 FFmpeg 멀티미디어 프레임워크 가이드

FFmpeg은 디지털 미디어 파일을 디코딩, 인코딩, 트랜스코딩, 멀티플렉싱, 스트리밍, 필터링 및 재생할 수 있는 최강의 멀티미디어 프레임워크입니다.

---

## 1. 📂 FFmpeg 핵심 라이브러리

FFmpeg은 용도에 따라 여러 개의 강력한 라이브러리로 구성되어 있습니다.

| 라이브러리 | 설명 |
| :--- | :--- |
| **libavutil** | 데이터 구조, 수학 연산, 난수 생성기 등 핵심 유틸리티 제공 |
| **libavcodec** | 오디오/비디오 코덱용 인코더 및 디코더 포함 (핵심 기능) |
| **libavformat** | 멀티미디어 컨테이너 포맷용 디멀티플렉서 및 멀티플렉서 포함 |
| **libavdevice** | 하드웨어 장치(V4L2, VfW, ALSA 등)의 입출력 지원 |
| **libavfilter** | 오디오/비디오 데이터에 적용할 미디어 필터 제공 |
| **libswscale** | 이미지 크기 조정 및 색 공간/픽셀 형식 변환 (최적화) |
| **libswresample** | 오디오 리샘플링 및 샘플 형식 변환 |



---

## 2. ⚙️ 기본 명령어 구조 및 옵션

### 기본 문법
```bash
ffmpeg [전역 옵션] [입력 옵션] -i [입력 파일] [출력 옵션] [출력 파일]
```

### 주요 옵션 설명
-i: 입력 파일 지정 (예: -i input.mp4)

-c:v: 비디오 코덱 지정 (예: -c:v libx264)

-c:a: 오디오 코덱 지정 (예: -c:a aac)

-c copy: 재인코딩 없이 스트림 복사 (가장 빠르고 화질 손실 없음)

-y: 출력 파일 덮어쓰기 확인 건너뛰기

## 3. 📝 핵심 개념 정리
### 📦 컨테이너 vs 코덱
컨테이너 (Container): 비디오, 오디오, 자막을 담는 상자 역할을 합니다. 확장자(.mp4, .mkv)로 구분됩니다.

코덱 (Codec): 미디어 데이터를 압축/해제하는 알고리즘입니다. 실제 품질과 용량을 결정합니다. (예: H.264, AAC)

### 🎞️ 미디어 속성
해상도 (Resolution): 비디오의 가로/세로 픽셀 수 (예: 1920x1080)

프레임레이트 (FPS): 1초당 표시되는 이미지 수 (예: 30fps, 60fps)

비트레이트 (Bitrate): 1초당 처리되는 데이터 양 (화질 및 파일 크기 결정)

픽셀 포맷: 픽셀당 색상 정보를 저장하는 방식 (예: yuv420p, rgb24)

## 4. 🐍 Python 연동 및 스트리밍 분석
파이썬 메서드 구조
start_durability_test(file_path, stream_name): 특정 파일을 지정된 스트림으로 송출하는 기능을 정의합니다.

subprocess.Popen: 파이썬 내부에서 외부 FFmpeg 프로세스를 실행합니다.

DEVNULL 설정: 로그 출력을 방지하여 시스템 부하를 최소화합니다.

## 🚀 FFmpeg 스트리밍 특화 옵션 상세
실시간 송출 및 내구성 테스트를 위해 최적화된 주요 옵션들입니다.

| 옵션 | 의미 | 상세 설명 |
| :--- | :--- | :--- |
| **-re** | Native Frame Rate | 영상을 파일 읽기 속도가 아닌, 실제 재생 시간 속도에 맞춰 읽습니다. 스트리밍 시 필수 옵션입니다. |
| **-stream_loop -1** | Infinite Loop | 파일이 끝나면 다시 처음부터 무한 반복합니다. 시스템 내구성 테스트를 위해 사용됩니다. |
| **-preset ultrafast** | Encoding Speed | 압축 속도를 최대(ultrafast)로 높입니다. CPU 사용량을 획기적으로 낮춰 다중 채널 동시 송출이 가능하게 합니다. |
| **-tune zerolatency** | Zero Latency | 실시간 스트리밍에서 발생하는 지연 시간(버퍼링)을 최소화하도록 설정을 최적화합니다. |
| **-crf 28** | Quality Index | 영상의 품질을 결정하는 지수입니다. 숫자가 클수록 압축률이 높아지고 화질은 낮아지며, 28은 적절한 용량과 화질을 제공합니다. |
| **-f rtsp** | Format | 출력 형식을 RTSP(Real Time Streaming Protocol)로 지정합니다. |
| **-rtsp_transport tcp** | Transport | 데이터 전송 시 패킷 유실이 없는 TCP 방식을 강제하여 화면 깨짐 현상을 방지합니다. |

## 5. 🏗️ H.264 인코딩의 중요성
H.264(또는 AVC)는 전 세계에서 가장 많이 쓰이는 영상 압축 기술입니다.

인코딩의 필요성: 원본 데이터는 용량이 너무 커서 네트워크 실시간 전송이 불가능합니다. 이를 전송 가능한 크기로 줄여주는 과정이 필수적입니다.

H.264의 특징:

높은 효율: 적은 용량으로도 우수한 화질을 제공합니다.

광범위한 호환성: 거의 모든 브라우저, 스마트폰, CCTV 소프트웨어에서 재생 가능합니다.

표준 규격: 팀그릿 환경 등 외부 시스템과 소스를 공유할 때 필수적인 표준 코덱입니다.
